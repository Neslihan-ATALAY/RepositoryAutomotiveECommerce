<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>    
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %> 
<html>
	<head>
		<meta charset="utf-8">
		<title>User - Basket List Form</title>
	</head> 
	<body>
		<jsp:include page="loginPartial.jsp" />
		<form:form name="basketListForm" method="GET" action="OrderController/crder">
			<div align="center">
				<table id="basketListTable">
					<tr>
						<th>Product Name</th>
						<th>Mark</th>
						<th>Stock Code</th>
						<th>Product Price</th>
						<th>Quantity</th>
						<th>Total Price</th>						
					</tr>
					<c:set var="Total" scope="session" value="0" />
					<c:forEach var="model" items="${modelList}">
						<tr>
							<td>
								<label name="labelProductName" value="<c:out value="${model.product.name}/>" />
							</td>
							<td>
								<label name="labelMark" value="<c:out value="${model.product.mark}/>" />
							</td>
							<td>
								<label name="labelStockCode" value="<c:out value="${model.product.stockCode}/>" />
							</td>
							<td>
								<label name="labelPrice" value="<c:out value="${model.product.price}/>" />
							</td>
							<td>
								<label name="labelQuantity" value="<c:out value="${model.quantity}/>" />
							</td>
							<td>
								<label name="labelPrice" value="<c:out value="${model.totalPrice}/>" />
								<c:set name="Total" scope="session" value="${Total + model.totalPrice}" />
							</td>
						</tr>
					</c:foreach>
					<tr>
						<td colspan="5" align="right">
							Total Price (Turkish Lira):
						</td>
						<td>
							<c:out value="${Total}" />
						</td>
					</tr>
					<tr>
						<td colspan="5" align="right">
							Create Order:
						</td>
						<td>
							<input type="submit" value="ORDER" />
						</td>
					</tr>
				</table>
			</div>
		</form:form>
	</body>
</html>